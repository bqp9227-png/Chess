<style>
  .square { position: relative; }
  .half {
    width: 100%; height: 50%;
  }
  .top { border-bottom: 2px solid #000; }
  .bottom { border-top: 2px solid #000; }
  .black-control { background-color: rgba(0,0,0,0.3); }
  .white-control { background-color: rgba(255,255,255,0.6); }
</style>

<script>
function render(){
  boardEl.innerHTML="";
  const {controlWhite, controlBlack} = computeControl();
  for(let r=0;r<8;r++)for(let c=0;c<8;c++){
    const sq=document.createElement("div");
    sq.className="square " + ((r+c)%2===0?"light":"dark");

    const top=document.createElement("div");
    top.className="half top";
    if(controlBlack[r][c]>0 && controlWhite[r][c]>0) top.classList.add("black-control");

    const bottom=document.createElement("div");
    bottom.className="half bottom";
    if(controlWhite[r][c]>0 && controlBlack[r][c]>0) bottom.classList.add("white-control");

    sq.appendChild(top);
    sq.appendChild(bottom);

    if(board[r][c]) {
      const piece=document.createElement("span");
      piece.textContent=board[r][c].type;
      piece.style.position="absolute";
      piece.style.top="50%"; piece.style.left="50%";
      piece.style.transform="translate(-50%,-50%)";
      sq.appendChild(piece);
    }

    boardEl.appendChild(sq);
  }
}
</script>
